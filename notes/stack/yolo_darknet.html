---
layout: default
title: Vaibhav Arora, theboxtroll
---
<h1>YOLOv3 in Windows with Darknet</h1>
<p>Tested with: Win10, CMake 3.16.0 rc-3, MS Visual Studio 2019</p>
<p>- Clone the Darknet repo from (better suited for Windows build, for Linux, can use the main repo of &apos;pjreddie&apos;): https://github.com/AlexeyAB/darknet&nbsp;</p>
<p>- Get &apos;YOLOv3-320&apos; weights and save in the root folder darknet/: https://pjreddie.com/darknet/yolo/&nbsp;</p>
<p>- To compile:</p>
<p><span style="white-space:pre;">&nbsp; &nbsp;&nbsp;</span>In the Windows:</p>
<p><span style="white-space:pre;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>- Open Cmake (gui)&nbsp;</p>
<p><span style="white-space:pre;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>- Refer the steps in https://hsto.org/webt/pz/s1/uu/pzs1uu4heb7vflfcjqn-lxy-aqu.jpeg</p>
<p><span style="white-space:pre;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>- Enter input path to the darknet Source, and output path to the Binaries (same root folder for &nbsp;both darknet/&nbsp;</p>
<p><span style="white-space:pre;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>- Configure (button) -&gt; Optional platform for generator: x64 -&gt; Finish&nbsp;</p>
<p><span style="white-space:pre;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>- Deselect dependencies OpenCV, cudDNN, etx. if don&apos;t have already</p>
<p><span style="white-space:pre;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>- Generate -&gt; Open Project (opens MS Visual Studio)</p>
<p><span style="white-space:pre;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>- In MS Visual Studio:&nbsp;</p>
<p><span style="white-space:pre;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>- Change Debug -&gt; Release</p>
<p><span style="white-space:pre;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>- Select: x64&nbsp;</p>
<p><span style="white-space:pre;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>- Build -&gt; Build solution&nbsp;</p>
<p><br></p>
<p>- To run:</p>
<p><span style="white-space:pre;">&nbsp; &nbsp;&nbsp;</span>- Open cmd in root folder darknet/</p>
<p><span style="white-space:pre;">&nbsp; &nbsp;&nbsp;</span>- Run: darknet.exe detect cfg/yolov3.cfg yolov3.weights data/dog.jpg</p>
<p><span style="white-space:pre;">&nbsp; &nbsp;&nbsp;</span>- If error &apos;internal command not found&apos;, run: Release/darknet.exe detect cfg/yolov3.cfg yolov3.weights data/dog.jpg</p>
<p><span style="white-space:pre;">&nbsp; &nbsp;&nbsp;</span>- If the same error, make sure the complete path is added to Environment Variables -&gt; Path</p>
<p><span style="white-space:pre;">&nbsp; &nbsp;&nbsp;</span>- If error plthreadV2.exe not found:</p>
<p><span style="white-space:pre;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>- Copy darklib.dll and uselib.exe from darknet/Release folder to the darknet/ root folder</p>
<p><span style="white-space:pre;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>- Copy pthreadGC2.dll and pthreadVC2.dll from darknet\3rdparty\pthreads\bin\ folder to the darknet/ root folder</p>
<p><span style="white-space:pre;">&nbsp; &nbsp;&nbsp;</span>- Finally from root folder, run: darknet.exe detect cfg/yolov3.cfg yolov3.weights data/dog.jpg</p>
<p><span style="white-space:pre;">&nbsp; &nbsp;&nbsp;</span>- Output saved in predictions.jpg in root folder</p>
<p>- To run from Python:</p>
<p><span style="white-space:pre;">&nbsp; &nbsp;&nbsp;</span>#!/usr/bin/env python</p>
<p><span style="white-space:pre;">&nbsp; &nbsp;&nbsp;</span>from subprocess import call</p>
<p><span style="white-space:pre;">&nbsp; &nbsp;&nbsp;</span>dir = r&quot;C:\..\darknet-master\darknet-master&quot;</p>
<p><span style="white-space:pre;">&nbsp; &nbsp;&nbsp;</span>cmdline = &quot;darknet.exe detect cfg/yolov4-tiny.cfg yolov4-tiny.weights data/multi.jpg&quot;</p>
<p><span style="white-space:pre;">&nbsp; &nbsp;&nbsp;</span>rc = call(cmdline, cwd=dir) # run `cmdline` in `dir`</p>
